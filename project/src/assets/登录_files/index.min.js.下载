;/* current version is v1.2.7 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.iLoginComp=n()}(this,function(){"use strict";var g,e,a=function(){return(a=Object.assign||function(e){for(var n,o=1,t=arguments.length;o<t;o++)for(var i in n=arguments[o])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};(e=g=g||{}).CANCEL_LOGIN="cancelLogin",e.COMP_INNER="iLoginCompInner",e.CODE_ID="sendCodeBtn",e.CODE_TEXT="sendCodeBtnText",e.LOGIN_ID="iloginBtn",e.PHONE_NUM_INPUT_ID="phoneNumInput",e.CODE_INPUT_ID="codeInput",e.TIP_ID="iLoginCompShowTip",e.MASK_ID="iLoginCompMask",e.YODA_SMS_VERIFY="smdcodeYodaRoot",e.YODA_SEC_VERIFY="secYodaRoot",e.MODEL_ID="iLoginCompModel",e.SECOND_MOBILE_MODEL_ID="iLoginCompSecMobileModel",e.SECOND_MOBILE_PHONE_ID="iLoginCompSecMobileModelPhoneNum",e.SECOND_MOBILE_AVATAR_ID="iLoginCompSecMobileModelAvatar",e.SECOND_MOBILE_NICKNAME_ID="iLoginCompSecMobileModelNickName",e.SECOND_MOBILE_BUTTON_YES_ID="iLoginCompSecMobileButtonYes",e.SECOND_MOBILE_BUTTON_NO_ID="iLoginCompSecMobileButtonNo",e.FIRST_TIP_ID="firstTip",e.SECOND_TIP_ID="secondTip",e.COUNTRYCODE="iloginCountryCode",e.COUNTRYNAME="iloginCountryName",e.PHONE_NUM_CLEAR_ID="phoneNumClear",e.CODE_CLEAR_ID="codeClear",e.LOADING_ID="iloginLoading";function s(e,n){return void 0===n&&(n=""),!!~(e.className||"").split(/\s+/g).indexOf(n.trim())}function c(e,n){var o,t,i;void 0===n&&(n=""),1===e.nodeType&&(o=n.split(/\s+/g),t=e.className,(i=t)?(o.forEach(function(e){~t.indexOf(" "+e+" ")||(i+=" "+e)}),e.className=i):e.className=n)}function l(e,n){var o,t;1===e.nodeType&&(n?(o=n.split(/\s+/g),t=e.className,o.forEach(function(e){t=t.replace(e," ")}),e.className=t.trim()):e.className="")}var d={addHandler:function(e,n,o){if(e)switch(n){case"tap":this.touch[n].addHandler(e,o);break;default:e.addEventListener(n,this.clickHandler=function(e){setTimeout(function(){o(e)},100)},!1)}},removeHandler:function(e,n,o){switch(n){case"tap":this.touch[n].removeHandler(e,n,o);break;default:e.removeEventListener(n,this.clickHandler,!1)}},touch:{tap:{tapHandlerMap:{touchstart:{},touchend:{}},addHandler:function(e,r){var o,t,a={},s=null;e.id?(e.addEventListener("touchstart",this.tapHandlerMap.touchstart[e.id]=function(e){var n=e.touches[0];o=Date.now(),t=o-(a.last||o),clearTimeout(s),0<t&&t<=250&&(a.isDoubleTap=!0),a.last=o,this.startTx=n.clientX,this.startTy=n.clientY},!1),e.addEventListener("touchend",this.tapHandlerMap.touchend[e.id]=function(e){var n=this,o=e.changedTouches[0],t=o.clientX,i=o.clientY;return Math.abs(this.startTx-t)<6&&Math.abs(this.startTy-i)<6?a.isDoubleTap?(a.isDoubleTap=!1,this.startTx=null,this.startTy=null,i=t=null,!1):void(s=setTimeout(function(){r(e),s=null,n.startTx=null,n.startTy=null,i=t=null,a={}},250)):(a={},this.startTx=null,this.startTy=null,i=t=null,!1)},!1)):console.warn("添加tap事件时，请给element一个ID")},removeHandler:function(e){e.removeEventListener("touchstart",this.tapHandlerMap.touchstart[e.id],!1),e.removeEventListener("touchend",this.tapHandlerMap.touchend[e.id],!1)}}},getEvent:function(e){return e},getTarget:function(e){return e.target},preventDefault:function(e){e.preventDefault()},stopPropagation:function(e){e.stopPropagation()},getCharCode:function(e){return e.keyCode}};var n=setTimeout;function u(e){return Boolean(e&&void 0!==e.length)}function t(){}function p(e){if(!(this instanceof p))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],y(e,this)}function i(o,t){for(;3===o._state;)o=o._value;0!==o._state?(o._handled=!0,p._immediateFn(function(){var e,n=1===o._state?t.onFulfilled:t.onRejected;if(null!==n){try{e=n(o._value)}catch(e){return void m(t.promise,e)}r(t.promise,e)}else(1===o._state?r:m)(t.promise,o._value)})):o._deferreds.push(t)}function r(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if(e instanceof p)return n._state=3,n._value=e,void f(n);if("function"==typeof o)return void y((t=o,i=e,function(){t.apply(i,arguments)}),n)}n._state=1,n._value=e,f(n)}catch(e){m(n,e)}var t,i}function m(e,n){e._state=2,e._value=n,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&p._immediateFn(function(){e._handled||p._unhandledRejectionFn(e._value)});for(var n=0,o=e._deferreds.length;n<o;n++)i(e,e._deferreds[n]);e._deferreds=null}function h(e,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=o}function y(e,n){var o=!1;try{e(function(e){o||(o=!0,r(n,e))},function(e){o||(o=!0,m(n,e))})}catch(e){if(o)return;o=!0,m(n,e)}}p.prototype.catch=function(e){return this.then(null,e)},p.prototype.then=function(e,n){var o=new this.constructor(t);return i(this,new h(e,n,o)),o},p.prototype.finally=function(n){var o=this.constructor;return this.then(function(e){return o.resolve(n()).then(function(){return e})},function(e){return o.resolve(n()).then(function(){return o.reject(e)})})},p.all=function(n){return new p(function(i,r){if(!u(n))return r(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(n);if(0===a.length)return i([]);var s=a.length;for(var e=0;e<a.length;e++)!function n(o,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void t.call(e,function(e){n(o,e)},r)}a[o]=e,0==--s&&i(a)}catch(e){r(e)}}(e,a[e])})},p.resolve=function(n){return n&&"object"==typeof n&&n.constructor===p?n:new p(function(e){e(n)})},p.reject=function(o){return new p(function(e,n){n(o)})},p.race=function(i){return new p(function(e,n){if(!u(i))return n(new TypeError("Promise.race accepts an array"));for(var o=0,t=i.length;o<t;o++)p.resolve(i[o]).then(e,n)})},p._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){n(e,0)},p._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var b=null,C=function(){clearInterval(b)},v=function(t,i){return new p(function(e,n){clearInterval(b),b=null;var o=0;i.innerHTML=t-o+"",b=setInterval(function(){o+=1,i.innerHTML=t-o+"",o===t&&(C(),e())},1e3)})};function k(r,a,s,c,l){void 0===l&&(l=!1);try{return c=c||{},new p(function(n,o){var t,i=new XMLHttpRequest;if("withCredentials"in i){if(c["Content-Type"]="application/x-www-form-urlencoded",i.withCredentials=l,i.open(a,r,!0),i.timeout=6e4,c)for(var e in c)c.hasOwnProperty(e)&&i.setRequestHeader(e,c[e]);i.onload=function(){if(4===i.readyState)if(200<=i.status&&i.status<300||304===i.status){try{var e=JSON.parse(i.response);n(e)}catch(e){n(i.response)}i=null}else o(new Error(i.statusText)),i=null},i.ontimeout=function(e){o(new Error("请求超时:"+r)),i=null},i.onerror=function(){o(new Error(i.statusText)),i=null},i.send(s)}else{window.XDomainRequest?((t=new XDomainRequest).open(a,r),t.onprogress=function(){},t.ontimeout=function(){o(new Error("请求超时:"+r)),t=null},t.onerror=function(){o(new Error("xdr onerror")),t=null},t.onload=function(){try{n(JSON.parse(t.responseText))}catch(e){console.error(e),n(t.responseText)}},setTimeout(function(){t.send(s)},0)):(o(new Error("创建xhr对象失败")),i=null)}})}catch(e){throw console.error(e),e}}function E(e,n,o){return void 0===n&&(n=null),void 0===o&&(o=!1),k(e,"GET",null,n,o)}function O(e,n,o,t){if("object"==typeof n&&!(n instanceof String||window.FormData&&n instanceof window.FormData)){var i=[];for(var r in n)i.push(encodeURIComponent(r)+"="+encodeURIComponent(n[r]));n=i.join("&")}return k(e,"POST",n,o,t)}function o(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}function _(e){return Object(o(e))}function w(e,n){return L.call(e,n)}function I(e){return T(o(e))}function N(e){return isNaN(e=+e)?0:(0<e?S:D)(e)}var L={}.hasOwnProperty,x={}.toString,T=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==(n=e,x.call(n).slice(8,-1))?e.split(""):Object(e);var n},D=Math.ceil,S=Math.floor,P=Math.min,M=Math.max,B=Math.min;function R(e,n){return e(n={exports:{}},n.exports),n.exports}function A(e){return"Symbol(".concat(void 0===e?"":e,")_",(++W+K).toString(36))}function F(e){return"object"==typeof e?null!==e:"function"==typeof e}function H(e){if(!F(e))throw TypeError(e+" is not an object!");return e}function j(e){try{return!!e()}catch(e){return!0}}function U(t,i,e){if(!function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(t),void 0===i)return t;switch(e){case 1:return function(e){return t.call(i,e)};case 2:return function(e,n){return t.call(i,e,n)};case 3:return function(e,n,o){return t.call(i,e,n,o)}}return function(){return t.apply(i,arguments)}}var z,G,V=R(function(e){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)}),Y=(V.version,R(function(e){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)})),q=R(function(e){var n="__core-js_shared__",o=Y[n]||(Y[n]={});(e.exports=function(e,n){return o[e]||(o[e]=void 0!==n?n:{})})("versions",[]).push({version:V.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),W=0,K=Math.random(),Q=q("keys"),X=(z=!1,function(e,n,o){var t,i,r,a,s=I(e),c=0<(t=s.length)?P(N(t),9007199254740991):0,l=(r=c,(i=N(i=o))<0?M(i+r,0):B(i,r));if(z&&n!=n){for(;l<c;)if((a=s[l++])!=a)return!0}else for(;l<c;l++)if((z||l in s)&&s[l]===n)return z||l||0;return!z&&-1}),J=Q[G="IE_PROTO"]||(Q[G]=A(G)),$="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Z=Object.keys||function(e){return function(e,n){var o,t=I(e),i=0,r=[];for(o in t)o!=J&&w(t,o)&&r.push(o);for(;n.length>i;)w(t,o=n[i++])&&(~X(r,o)||r.push(o));return r}(e,$)},ee=!j(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),ne=Y.document,oe=F(ne)&&F(ne.createElement),te=!ee&&!j(function(){return 7!=Object.defineProperty(oe?ne.createElement("div"):{},"a",{get:function(){return 7}}).a}),ie=Object.defineProperty,re={f:ee?Object.defineProperty:function(e,n,o){if(H(e),n=function(e,n){if(!F(e))return e;var o,t;if(n&&"function"==typeof(o=e.toString)&&!F(t=o.call(e)))return t;if("function"==typeof(o=e.valueOf)&&!F(t=o.call(e)))return t;if(!n&&"function"==typeof(o=e.toString)&&!F(t=o.call(e)))return t;throw TypeError("Can't convert object to primitive value")}(n,!0),H(o),te)try{return ie(e,n,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[n]=o.value),e}},ae=ee?function(e,n,o){return re.f(e,n,{enumerable:!((t=1)&t),configurable:!(2&t),writable:!(4&t),value:o});var t}:function(e,n,o){return e[n]=o,e},se=q("native-function-to-string",Function.toString),ce=R(function(e){var r=A("src"),n="toString",a=(""+se).split(n);V.inspectSource=function(e){return se.call(e)},(e.exports=function(e,n,o,t){var i="function"==typeof o;i&&(w(o,"name")||ae(o,"name",n)),e[n]!==o&&(i&&(w(o,r)||ae(o,r,e[n]?""+e[n]:a.join(String(n)))),e===Y?e[n]=o:t?e[n]?e[n]=o:ae(e,n,o):(delete e[n],ae(e,n,o)))})(Function.prototype,n,function(){return"function"==typeof this&&this[r]||se.call(this)})}),le="prototype",de=function(e,n,o){var t,i,r,a,s=e&de.F,c=e&de.G,l=e&de.S,d=e&de.P,u=e&de.B,p=c?Y:l?Y[n]||(Y[n]={}):(Y[n]||{})[le],m=c?V:V[n]||(V[n]={}),f=m[le]||(m[le]={});for(t in c&&(o=n),o)r=((i=!s&&p&&void 0!==p[t])?p:o)[t],a=u&&i?U(r,Y):d&&"function"==typeof r?U(Function.call,r):r,p&&ce(p,t,r,e&de.U),m[t]!=r&&ae(m,t,a),d&&f[t]!=r&&(f[t]=r)};Y.core=V,de.F=1,de.G=2,de.S=4,de.P=8,de.B=16,de.W=32,de.U=64,de.R=128;var ue,pe,me,fe,ge=de;ue="keys",pe=function(){return function(e){return Z(_(e))}},me=(V.Object||{})[ue]||Object[ue],(fe={})[ue]=pe(me),ge(ge.S+ge.F*j(function(){me(1)}),"Object",fe);var he=V.Object.keys;function ye(e){return"string"==typeof e?e:"number"==typeof e&&isFinite(e)?""+e:"boolean"==typeof e?e?"true":"false":""}function be(e,n){var o=n||{},t=o.sep,i=void 0===t?"&":t,r=o.eq,a=void 0===r?"=":r,s=o.encode,c=void 0===s?encodeURIComponent:s;if(null===e||"object"!=typeof e)return"";for(var l=he(e),d=l.length,u=d-1,p="",m=0;m<d;++m){var f=l[m],g=e[f],h=c(ye(f))+a;if(Array.isArray(g)){for(var y=g.length,b=y-1,C=0;C<y;++C)p+=h+c(ye(g[C])),C<b&&(p+=i);y&&m<u&&(p+=i)}else p+=h+c(ye(g)),m<u&&(p+=i)}return p}var Ce={env:"",api:""},ve=function(){return Ce.env},ke={f:Object.getOwnPropertySymbols},_e={f:{}.propertyIsEnumerable},we=Object.assign,Ie=!we||j(function(){var e={},n={},o=Symbol(),t="abcdefghijklmnopqrst";return e[o]=7,t.split("").forEach(function(e){n[e]=e}),7!=we({},e)[o]||Object.keys(we({},n)).join("")!=t})?function(e,n){for(var o=_(e),t=arguments.length,i=1,r=ke.f,a=_e.f;i<t;)for(var s,c=T(arguments[i++]),l=r?Z(c).concat(r(c)):Z(c),d=l.length,u=0;u<d;)s=l[u++],ee&&!a.call(c,s)||(o[s]=c[s]);return o}:we;ge(ge.S+ge.F,"Object",{assign:Ie});function Ne(){switch(ve()){case"dev":return"//verify.inf.dev.sankuai.com";case"test":return"//verify.inf.test.sankuai.com";case"testOutside":return"//yoda-yoda.test.meituan.com";case"staging":return"//verify-test.meituan.com";default:return"https://verify.meituan.com"}}function Le(){return Ne()+"/v2/ext_api/page_data"}function xe(e){var n,o,t=e.env,i=void 0===t?"":t,r=e.uiConfig,a=e.risk_platform,s=e.risk_partner,c=e.risk_app,l=e.join_key,d=void 0===l?"":l,u=e.risk_smsTemplateId,p=e.risk_smsPrefixId,m=e.uuid,f=void 0===m?"":m,g=e.componentId,h=void 0===g?"iLoginComp":g,y=e.api,b=void 0===y?"":y,C=e.loginSource,v=void 0===C?0:C,k=e.campaignPlatform,_=e.allCampaignId,w=e.token_id,I=e.specialRiskCode,N=e.tokenVersion,L=void 0===N?1:N,x=e.officialAccount,E=e.callbackUrl,O=void 0===E?window.location.href:E,T=e.callbackFailUrl,D=void 0===T?window.location.href:T,S=e.LONGITUDE,P=void 0===S?"":S,M=e.LATITUDE,B=void 0===M?"":M,R=e.isMobile,A=void 0===R||R,F=e.phone_num,H=void 0===F?"":F,j=Te({show:!1,code:"86",name:"中国",canchange:!0,showname:!0},e.countrycode);return Te(Pe,{risk_platform:a,risk_partner:s,risk_app:c,join_key:d,risk_smsTemplateId:u,risk_smsPrefixId:p,uuid:f,loginSource:v,campaignPlatform:k,allCampaignId:_,token_id:w||"DNCmLoBpSbBD6leXFdqIxA",tokenVersion:L,specialRiskCode:I,officialAccount:x,callbackUrl:O,callbackFailUrl:D,LONGITUDE:P,LATITUDE:B,isMobile:A,phone_num:H+"",countrycode:j}),n=i,Ce.env=n,"portm"===(o=b)||""===o?Ce.api=o:console.error("api的值只支持portm和空字符串!"),{uiConfig:Te({},Se,r),componentId:h}}var Ee,Oe,Te=V.Object.assign,De={prod:{mobileloginapply:"https://passport.meituan.com/api/v3/account/mobileloginapply",mobilelogin:"https://passport.meituan.com/api/v3/account/mobilelogin",verifylogin:"https://passport.meituan.com/api/v1/account/verifylogin",ticketlogin:"https://passport.meituan.com/api/v1/account/ticketlogin",h5loginapply:"https://open.meituan.com/thirdlogin/h5loginapply",h5login:"https://open.meituan.com/thirdlogin/h5login",h5auth:"https://open.meituan.com/thirdlogin/auth"},staging:{mobileloginapply:"//passport-wpt-st.sankuai.com/api/v3/account/mobileloginapply",mobilelogin:"//passport-wpt-st.sankuai.com/api/v3/account/mobilelogin",verifylogin:"//passport-wpt-st.sankuai.com/api/v1/account/verifylogin",ticketlogin:"//passport-wpt-st.sankuai.com/api/v1/account/ticketlogin",h5loginapply:"//thirdlogin-wpt-st.sankuai.com/thirdlogin/h5loginapply",h5login:"//thirdlogin-wpt-st.sankuai.com/thirdlogin/h5login",h5auth:"//thirdlogin-wpt-st.sankuai.com/thirdlogin/auth"},dev:{mobileloginapply:"//passport.wpt.dev.sankuai.com/api/v3/account/mobileloginapply",mobilelogin:"//passport.wpt.dev.sankuai.com/api/v3/account/mobilelogin",verifylogin:"//passport.wpt.dev.sankuai.com/api/v1/account/verifylogin",ticketlogin:"//passport.wpt.dev.sankuai.com/api/v1/account/ticketlogin",h5loginapply:"//thirdlogin.wpt.dev.sankuai.com/thirdlogin/h5loginapply",h5login:"//thirdlogin.wpt.dev.sankuai.com/thirdlogin/h5login",h5auth:"//thirdlogin.wpt.dev.sankuai.com/thirdlogin/auth"},test:{mobileloginapply:"//passport-wpt-test.sankuai.com/api/v3/account/mobileloginapply",mobilelogin:"//passport-wpt-test.sankuai.com/api/v3/account/mobilelogin",verifylogin:"//passport-wpt-test.sankuai.com/api/v1/account/verifylogin",ticketlogin:"//passport-wpt-test.sankuai.com/api/v1/account/ticketlogin",h5loginapply:"//thirdlogin-wpt-test.sankuai.com/thirdlogin/h5loginapply",h5login:"//thirdlogin-wpt-test.sankuai.com/thirdlogin/h5login",h5auth:"//thirdlogin-wpt-test.sankuai.com/thirdlogin/auth"},testOutside:{mobileloginapply:"//usercenter.test.meituan.com/api/v3/account/mobileloginapply",mobilelogin:"//usercenter.test.meituan.com/api/v3/account/mobilelogin",verifylogin:"//usercenter.test.meituan.com/api/v1/account/verifylogin",ticketlogin:"//usercenter.test.meituan.com/api/account/v1/ticketlogin",h5loginapply:"//usercenter.test.meituan.com/thirdlogin/h5loginapply",h5login:"//usercenter.test.meituan.com/thirdlogin/h5login",h5auth:"//usercenter.test.meituan.com/thirdlogin/auth"}},Se={extraClass:"",loginBtnText:"登录",codePlaceholder:"请输入短信验证码",phoneNumPlaceholder:"请输入手机号",sendCodeText:"发送验证码",showSendCodeLoading:!1,sendCodeLoadingText:"发送中",sendCodeTextAgain:"重新发送",sendingCodeText:"s",sendCodePos:1,cancelBtnText:"取消",showCancel:!1,tipStyle:1,showClearInput:!1,phonenumberFormat:!1,loginMode:1,phoneNumErrorText:"",codeErrorText:"",loginErrorText:"",errorPos:1},Pe={};(Oe=Ee=Ee||{}).loginApplyUrl="mobileloginapply",Oe.mobileLoginUrl="mobilelogin",Oe.verifyloginUrl="verifylogin",Oe.ticketloginUrl="ticketlogin",Oe.h5LoginApplyUrl="h5loginapply",Oe.h5loginUrl="h5login",Oe.h5authUrl="h5auth";function Me(e){var n=De[ve()||"prod"];return("portm"===Ce.api?he(n).reduce(function(e,n){return e[n]="https://portal-portm.meituan.com/weapp/loginsdk/api/"+(ve()?ve()+"/":"")+n,e},{}):n)[e]}function Be(e){return e&&"string"==typeof e&&/^[A-Za-z0-9._-]{16,64}$/.test(e)}function Re(e){Be(e)&&(Xe.set("iuuid",e,{domain:".meituan.com",expires:730}),Xe.set("iuuid",e,{domain:".sankuai.com",expires:730}))}function Ae(e,n){return void 0===n&&(n=1),Be(e)?(Re(Je=e),p.resolve(Je)):Be(Je)?(Re(Je),p.resolve(Je)):$e(n).then(function(e){return Re(Je=e),Je})}function Fe(o){return void 0===o&&(o={}),he(o).reduce(function(e,n){return null!=o[n]&&(e[n]=o[n]),e},{})}function He(){return/QQ\/([\d.]+)/.test(navigator.userAgent)}function je(){return-1<Ze.indexOf("micromessenger")}function Ue(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function ze(e){var n,o=document.createElement("script");o.type="text/javascript",o.async=e.async||!1,o.src=e.src,"afterbody"===e.position?document.getElementsByTagName("body")[0].appendChild(o):(n=document.getElementsByTagName("script")[0])?n.parentNode.insertBefore(o,n):document.getElementsByTagName("head")[0].appendChild(o)}function Ge(e,n){return void 0===n&&(n="86"),"86"===n?/^1[0-9]\d{9}$/.test(e):/^\d+$/.test(e)}function Ve(n){var e,o;n.msg&&(e=function(e){n.ele.style.display="none",nn(n.maskEle),n[e]&&"function"==typeof n[e]&&n[e]()},o="\n    <div style='color: #333'>提示</div>\n    <div style='margin-top:1em;padding-bottom:1em;color: #888;'>"+n.msg+"</div>\n    "+(!0===n.hasCancel?"<div style='height: 2.25em; line-height: 2.25em;'><div style='color:#ffc300;border-top: 1px solid #e5e5e5;border-right: 1px solid #e5e5e5;border-left: 1px solid transparent;display: inline-block;width: 50%;height: 100%;box-sizing: border-box;' id='iLoginComp-tip-cancel-id'>取消</div><div style='color:#ffc300;border-top: 1px solid #e5e5e5;display: inline-block;width: 50%;height: 100%;box-sizing: border-box;' id='iLoginComp-tip-confirm-id'>确定</div></div>":"<div style='padding:.5em 0;color:#ffc300;border-top: 1px solid #e5e5e5;' id='iLoginComp-tip-confirm-id'>确定</div>")+"\n  ",n.ele.innerHTML=o,en(n.maskEle),!0===n.hasCancel&&(document.getElementById("iLoginComp-tip-cancel-id").onclick=e.bind(window,"cancelCallBack")),document.getElementById("iLoginComp-tip-confirm-id").onclick=e.bind(window,"confirmCallBack"),n.ele.style.top="11em",n.ele.style.display="block")}function Ye(e){e.yodaEle.style.display="none",nn(e.maskEle)}function qe(e){return Rohr_Opt&&Rohr_Opt.reload?Rohr_Opt.reload(e):""}function We(e,n){var o,t=(o=e,Ne()+"/v2/ext_api/"+o+"/info");return O(t,Te(n,{_token:qe(t)})).then(function(e){return e})}function Ke(e,n){var o,t=(o=e,Ne()+"/v2/ext_api/"+o+"/verify");return Te(n,{_token:qe(t)}),O(t,n).then(function(e){return e})}var Qe="1.2.7",Xe=R(function(e,n){var o;o=function(){function s(){for(var e=0,n={};e<arguments.length;e++){var o=arguments[e];for(var t in o)n[t]=o[t]}return n}function l(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(c){function a(){}function o(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=s({path:"/"},a.defaults,o)).expires&&(o.expires=new Date(+new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var t=JSON.stringify(n);/^[\{\[]/.test(t)&&(n=t)}catch(e){}n=c.write?c.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var i="";for(var r in o)o[r]&&(i+="; "+r,!0!==o[r]&&(i+="="+o[r].split(";")[0]));return document.cookie=e+"="+n+i}}function n(e,n){if("undefined"!=typeof document){for(var o={},t=document.cookie?document.cookie.split("; "):[],i=0;i<t.length;i++){var r=t[i].split("="),a=r.slice(1).join("=");n||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var s=l(r[0]),a=(c.read||c)(a,s)||l(a);if(n)try{a=JSON.parse(a)}catch(e){}if(o[s]=a,e===s)break}catch(e){}}return e?o[e]:o}}return a.set=o,a.get=function(e){return n(e,!1)},a.getJSON=function(e){return n(e,!0)},a.remove=function(e,n){o(e,"",s(n,{expires:-1}))},a.defaults={},a.withConverter=e,a}(function(){})},e.exports=o()}),Je=Xe.get("iuuid")||"",$e=function(n){return E("https://portal-portm.meituan.com/weapp/loginsdk/api/uuid").then(function(e){return e}).catch(function(e){return 0<n?(console.log("获取uuid错误，请重试"),$e(n-1)):""})},Ze=navigator.userAgent.toLocaleLowerCase(),en=function(e){e.style.display="block"},nn=function(e){e.style.display="none"};function on(e){if(0===e.length)return[];if(1===e.length)return[e.charCodeAt(0)];for(var n=[],o=0;o<e.length;++o)n[n.length]=e.charCodeAt(o);return n}var tn=[38],rn=[61];function an(e,n,o){var t={};if("string"!=typeof e||0===e.length)return t;for(var i=n?on(n+""):tn,r=o?on(o+""):rn,a=i.length,s=r.length,c=[],l=0,d=0,u=0,p="",m="",f=0;f<e.length;++f){var g=e.charCodeAt(f);if(g===i[d]){if(++d===a){var h,y=f-d+1;if(u<s){if(!(l<y)){l=f+1,d=u=0;continue}p+=e.slice(l,y)}else l<y&&(m+=e.slice(l,y));-1===c.indexOf(p)?(t[p]=m,c[c.length]=p):(h=t[p]).pop?h[h.length]=m:t[p]=[h,m],p=m="",l=f+1,d=u=0}}else{if(d=0,u<s){if(g===r[u]){++u===s&&(l<(y=f-u+1)&&(p+=e.slice(l,y)),l=f+1);continue}if(u=0,43===g){l<f&&(p+=e.slice(l,f)),p+=" ",l=f+1;continue}}43===g&&(l<f&&(m+=e.slice(l,f)),m+=" ",l=f+1)}}if(l<e.length)u<s?p+=e.slice(l):d<a&&(m+=e.slice(l));else if(0===u)return t;return-1===c.indexOf(p)?(t[p]=m,c[c.length]=p):(h=t[p]).pop?h[h.length]=m:t[p]=[h,m],t}var sn,cn,ln={};(cn=sn=sn||{}).SEND_SMSCODE_CLICK="sendSmscodeClick",cn.LOGIN_CLICK="loginClick",cn.BEFORE_LOGIN_COMPLETE="beforeLoginComplete",cn.LOGIN_COMPLETE="loginComplete",cn.LOGIN_LOADING_START="loginLoadingStart",cn.LOGIN_LOADING_END="loginLoadingEnd",cn.COMP_INITED="compInited",cn.CANCEL_CLICK="cancelClick",cn.PHONE_INPUT_FOCUS="phoneInputFocus",cn.CODE_INPUT_FOCUS="codeInputFocus",cn.PHONE_INPUT_BLUR="phoneInputBlur",cn.CODE_INPUT_BLUR="codeInputBlur",cn.LOGIN_FAILED="loginFailed";var dn=(un.prototype._emit=function(n,o){var t=this,e=this._callbacks[n];e&&e.forEach(function(e){if(e&&"function"==typeof e)try{e.call(t,o)}catch(e){console.error(e),console.warn("请检查"+n+"的逻辑！")}})},un.prototype.on=function(e,n){this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push(n)},un.prototype.clean=function(){this._callbacks={}},un);function un(){this._callbacks={}}function pn(){return mn.session}var mn={session:null};!function(e,n){void 0===n&&(n={});var o,t,i=n.insertAt;e&&"undefined"!=typeof document&&(o=document.head||document.getElementsByTagName("head")[0],(t=document.createElement("style")).type="text/css","top"===i&&o.firstChild?o.insertBefore(t,o.firstChild):o.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)))}('html{-ms-touch-action:manipulation;touch-action:manipulation}@media only screen and (min-width:320px){.fontSize{font-size:16px}}@media only screen and (min-width:480px){.fontSize{font-size:24px}}@media only screen and (min-width:560px){.fontSize{font-size:30px}}.mtfe-tip-mtfe-wrapper{display:none;position:absolute;width:70%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:9em;padding:.5em 1em;border-radius:.25em;background:rgba(0,0,0,.7);color:#fff;z-index:50;text-align:center}@media only screen and (min-width:320px){.mtfe-tip-mtfe-wrapper{font-size:16px}}@media only screen and (min-width:480px){.mtfe-tip-mtfe-wrapper{font-size:24px}}@media only screen and (min-width:560px){.mtfe-tip-mtfe-wrapper{font-size:30px}}.mtfe-model-mtfe-wrapper{display:none;position:absolute;width:80%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:9em;padding-top:.5em;border-radius:.25em;background:#fff;color:#fff;z-index:50;text-align:center}@media only screen and (min-width:320px){.mtfe-model-mtfe-wrapper{font-size:16px}}@media only screen and (min-width:480px){.mtfe-model-mtfe-wrapper{font-size:24px}}@media only screen and (min-width:560px){.mtfe-model-mtfe-wrapper{font-size:30px}}@-webkit-keyframes a{0%,39%,to{opacity:0}40%{opacity:1}}@keyframes a{0%,39%,to{opacity:0}40%{opacity:1}}.fadingCircle{width:1em;height:1em;position:relative;margin:auto;display:none;vertical-align:middle}@media only screen and (min-width:320px){.fadingCircle{font-size:16px}}@media only screen and (min-width:480px){.fadingCircle{font-size:24px}}@media only screen and (min-width:560px){.fadingCircle{font-size:30px}}.fadingCircle .sms-circle{width:100%;height:100%;position:absolute;left:0;top:0}.fadingCircle .sms-circle:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both}.fadingCircle .sms-circle2{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(30deg);transform:rotate(30deg)}.fadingCircle .sms-circle2:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.fadingCircle .sms-circle3{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(60deg);transform:rotate(60deg)}.fadingCircle .sms-circle3:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-1s;animation-delay:-1s}.fadingCircle .sms-circle4{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fadingCircle .sms-circle4:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-.9s;animation-delay:-.9s}.fadingCircle .sms-circle5{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(120deg);transform:rotate(120deg)}.fadingCircle .sms-circle5:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-.8s;animation-delay:-.8s}.fadingCircle .sms-circle6{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(150deg);transform:rotate(150deg)}.fadingCircle .sms-circle6:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-.7s;animation-delay:-.7s}.fadingCircle .sms-circle7{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fadingCircle .sms-circle7:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-.6s;animation-delay:-.6s}.fadingCircle .sms-circle8{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(210deg);transform:rotate(210deg)}.fadingCircle .sms-circle8:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-.5s;animation-delay:-.5s}.fadingCircle .sms-circle9{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(240deg);transform:rotate(240deg)}.fadingCircle .sms-circle9:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-.4s;animation-delay:-.4s}.fadingCircle .sms-circle10{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fadingCircle .sms-circle10:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-.3s;animation-delay:-.3s}.fadingCircle .sms-circle11{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(300deg);transform:rotate(300deg)}.fadingCircle .sms-circle11:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-.2s;animation-delay:-.2s}.fadingCircle .sms-circle12{width:100%;height:100%;position:absolute;left:0;top:0;-webkit-transform:rotate(330deg);transform:rotate(330deg)}.fadingCircle .sms-circle12:before{content:"";display:block;margin:0 auto;width:15%;height:15%;background-color:#a1a1a1;border-radius:100%;-webkit-animation:a 1.2s infinite ease-in-out both;animation:a 1.2s infinite ease-in-out both;-webkit-animation-delay:-.1s;animation-delay:-.1s}.mtfe-smscodeyoda-mtfe-wrapper{display:none;width:80%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:40%;position:absolute;z-index:30}.mtfe-secyoda-mtfe-wrapper{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;z-index:999;overflow-y:scroll}@media only screen and (min-width:320px){.mtfe-secyoda-mtfe-wrapper{font-size:16px}}@media only screen and (min-width:480px){.mtfe-secyoda-mtfe-wrapper{font-size:24px}}@media only screen and (min-width:560px){.mtfe-secyoda-mtfe-wrapper{font-size:30px}}.mtfe-mask-mtfe-wrapper,.mtfe-mask-second-mobile-wrapper{margin:0;padding:0;position:fixed;top:0;left:0;display:none;background:rgba(0,0,0,.6);width:100%;height:100%;z-index:20}.mtfe-domtip-mtfe-wrapper{font-size:.8em;color:#ff4a4a;margin-top:.6em;display:block}.mtfe-mask-second-mobile-wrapper{background-color:#fff;opacity:1;z-index:15}.mtfe-mask-second-mobile-wrapper .mtfe-mask-second-mobile{font-size:200px}.mtfe-mask-second-mobile-wrapper .mtfe-mask-second-mobile-tip{font-size:.18em;margin:2.194em auto 0;color:#666;width:16.444em;letter-spacing:-.024em}.mtfe-mask-second-mobile-wrapper .mtfe-mask-second-mobile-avatar{margin:.86em auto 0;width:.7em;height:.7em;border-radius:50%}.mtfe-mask-second-mobile-wrapper .mtfe-mask-second-mobile-avatar img{width:100%;height:100%;vertical-align:top}.mtfe-mask-second-mobile-wrapper .mtfe-mask-second-mobile-avatar img:not([src]),.mtfe-mask-second-mobile-wrapper .mtfe-mask-second-mobile-avatar img[src=""]{opacity:0}.mtfe-mask-second-mobile-wrapper .mtfe-mask-second-mobile-nickName{font-size:.14em;margin:.642em auto 0;text-align:center;color:#333;letter-spacing:-.024px;font-weight:700}.mtfe-mask-second-mobile-wrapper .mtfe-mask-second-mobile-confirm{font-size:.18em;margin:1.805em auto 0;width:16.444em;height:2.444em;line-height:2.444em;text-align:center;border-radius:.222em;letter-spacing:-.024em;color:#fff;background-color:#ffc300}.mtfe-mask-second-mobile-wrapper .mtfe-mask-second-mobile-deny{font-size:.18em;margin:1.805em auto 0;width:16.444em;height:2.444em;line-height:2.444em;text-align:center;border-radius:.222em;letter-spacing:-.024em;color:#999;border:1px solid #999}.mtfe-mask-second-mobile-wrapper .mtfe-mask-second-mobile-tip-2{font-size:.14em;margin:.642em auto 0;width:21.142em;height:2.444em;color:#999;letter-spacing:-.024px}.iLoginComp-clear-input-wrapper{position:relative;padding:.6em;-webkit-box-sizing:border-box;box-sizing:border-box}.iLoginComp-clear-input:before{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.iLoginComp-clear-input:after,.iLoginComp-clear-input:before{content:"";position:absolute;width:.8em;right:.2em;height:1px;background-color:#999;border-radius:.15em}.iLoginComp-clear-input:after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.iLoginComp-wrapper{width:100%;padding:1.2em;-webkit-box-sizing:border-box;box-sizing:border-box}@media only screen and (min-width:320px){.iLoginComp-wrapper{font-size:16px}}@media only screen and (min-width:480px){.iLoginComp-wrapper{font-size:24px}}@media only screen and (min-width:560px){.iLoginComp-wrapper{font-size:30px}}.iLoginComp-phone-num-wrapper{-ms-flex-pack:distribute;justify-content:space-around;border-bottom:1px solid #e5e5e5;padding-bottom:.6em;height:1.4em}.country-area,.iLoginComp-phone-num-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.country-area{max-width:50%;min-width:0;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;text-decoration:none;-webkit-tap-highlight-color:transparent;font-size:1em;color:#646464}.iLoginComp-countryname{margin-right:1.6px;margin-right:.1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.iLoginComp-countrycode{-webkit-box-flex:1;-ms-flex:1;flex:1}.right-arrow{width:.3em;min-width:.3em;height:.3em;display:inline-block;border-right:1px solid #646464;border-top:1px solid #646464;-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:.2em;margin-right:.6em}.iLoginComp-phone-num-input{height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding-top:0;-webkit-box-flex:1;-ms-flex:1;flex:1;border:0;min-width:0;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em}.iLoginComp-phone-num-input,.iLoginComp-phone-num-input:focus{outline:none;background-color:inherit}.iLoginComp-phone-num-input::-webkit-input-placeholder{color:#ccc}.iLoginComp-phone-num-input:-moz-placeholder,.iLoginComp-phone-num-input::-moz-placeholder{color:#ccc;opacity:1}.iLoginComp-phone-num-input:-ms-input-placeholder,.iLoginComp-phone-num-input::-ms-input-placeholder{color:#ccc}.iLoginComp-phone-num-input::placeholder{color:#ccc}.iLoginComp-verify-code-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:1em;padding-bottom:.6em;border-bottom:1px solid #e5e5e5;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.iLoginComp-code-input{-webkit-box-flex:1;-ms-flex:1;flex:1;width:100%;border:0;min-width:0;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em}.iLoginComp-code-input,.iLoginComp-code-input:focus{outline:none;background-color:inherit}.iLoginComp-code-input::-webkit-input-placeholder{color:#ccc}.iLoginComp-code-input:-moz-placeholder,.iLoginComp-code-input::-moz-placeholder{color:#ccc;opacity:1}.iLoginComp-code-input:-ms-input-placeholder,.iLoginComp-code-input::-ms-input-placeholder{color:#ccc}.iLoginComp-code-input::placeholder{color:#ccc}.iLogincomp-opbtn-wrapper{margin-top:2em}.iLoginComp-cancel-btn-wrapper,.iLoginComp-login-btn-wrapper{text-align:center;color:#999;background:#e5e5e5;height:2.6em;line-height:2.6em;border-radius:.3em;width:100%;display:block;border:none;cursor:pointer;font-size:1em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.iLoginComp-cancel-btn-wrapper:focus,.iLoginComp-login-btn-wrapper:focus{outline:0}.iLoginComp-login-btn-wrapper.iLogincomp-active{color:#fff;background:#06c1ae}.iLoginComp-send-verify-code-text{margin-left:.5em;font-size:.8em;color:#999;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#dcdcdc;border:1px solid #dcdcdc;padding:.2em .5em;border-radius:.2em;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0)}.iLoginComp-send-verify-code-text.iLogincomp-active{color:#06c1ae;border:1px solid #06c1ae;background:0}.iLogincomp-count-down{color:#999;background-color:#dcdcdc;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}');function fn(){return hn||(hn=new gn(ve()))}var gn=function(e){this.postBatch=function(e,n,o,t,i,r){void 0===n&&(n=""),void 0===o&&(o=""),void 0===t&&(t=""),void 0===i&&(i=""),void 0===r&&(r="");var a=e+"\t"+Date.now()+"\t"+n+"\t"+o+"\t"+t+"\t"+this.project+"\t"+this.origin+"\t"+i+"\t\t\t\t"+r;this.batchs.push(a)},this.sendBatch=function(){var e,n;0<this.batchs.length&&(e=this.host+"/api/batch?v="+this.catVersion,n={c:"S\t\t\t\t\t\t\n"+this.batchs.join("\n")},this.sendStatic(e,n),this.batchs=[])},this.sendLog=function(e){var n="string"==typeof e.content?e.content:JSON.stringify(e.content),o=[{project:this.project,pageUrl:this.pageUrl,resourceUrl:e.resourceUrl||"",category:e.category,sec_category:e.sec_category,level:e.level||"error",unionId:this.unionId,timestamp:Date.now(),content:n}],t=this.host+"/api/log?v="+this.catVersion;this.sendStatic(t,{c:JSON.stringify(o)})},this.metric=function(e){var n=this.host+"/api/metric?v="+this.catVersion+"&p="+this.project;this.sendStatic(n,{data:JSON.stringify(e)})},this.sendPv=function(e){var n=this.host+"/api/pv?v="+this.catVersion+"&project="+this.project+"&pageurl="+this.pageUrl+"&timestamp="+Date.now();this.sendStatic(n,{})},this.sendStatic=function(e,n){return O(e,n,function(){}).catch(function(e){return console.error(e)}),!0},this.batchs=[],this.project="mt-login-component",this.catVersion=1,window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),this.origin=window.location.origin,this.env=e?"test":"prod",this.host={prod:"//catfront.dianping.com",test:"//catfront.51ping.com"}[this.env],this.pageUrl=window.location.hostname+window.location.pathname},hn=null,yn=(bn.prototype.renderCountry=function(){var e=this.urlQueryObj.countrycode||"86",n=Pe.countrycode.code||"86",o=this.urlQueryObj.countryname||"中国",t=Pe.countrycode.name||"中国";if(Pe.countrycode.show&&Pe.countrycode.canchange?(this.countryCode=e,this.countryName=o):(this.countryCode=n,this.countryName=t),this.maxPhoneNumLen="86"===this.countryCode?this.uiConfig.phonenumberFormat?13:11:15,this.minPhoneNumLen="86"===this.countryCode?this.uiConfig.phonenumberFormat?13:11:5,this.elementNodes.phoneNumInput.maxLength=this.maxPhoneNumLen,Pe.countrycode.show&&(this.elementNodes.countryCodeSpan.textContent="+"+this.countryCode),Pe.countrycode.show&&Pe.countrycode.showname){try{this.countryName=decodeURIComponent(this.countryName)}catch(e){console.error(e),fn().sendLog({category:"jsError",sec_category:"【H5 decode countryName ERROR】",content:{sdkVersion:Qe,countryCode:this.countryCode,mobile:this.elementNodes.phoneNumInput.value.replace(/\s/g,""),error:e.message}}),this.countryName=""}this.elementNodes.countryNameSpan.textContent=""+this.countryName}},bn.prototype.inputClear=function(e){"phone"===e?(this.elementNodes.phoneNumInput.value="",this.elementNodes.phoneNumInput.focus(),this.elementNodes.phoneInputClear.style.display="none",this.handlePhoneInput("")):(this.elementNodes.codeInput.value="",this.elementNodes.codeInput.focus(),this.elementNodes.codeInputClear.style.display="none"),this.toggleLoginBtn()},bn.prototype.onPhoneNumInputFocus=function(){pn()&&pn()._emit(sn.PHONE_INPUT_FOCUS)},bn.prototype.onPhoneNumInputBlur=function(){pn()&&pn()._emit(sn.PHONE_INPUT_BLUR)},bn.prototype.onCodeInputFocus=function(){pn()&&pn()._emit(sn.CODE_INPUT_FOCUS)},bn.prototype.onCodeInputBlur=function(){pn()&&pn()._emit(sn.CODE_INPUT_BLUR)},bn);function bn(){var e,n,o,t,i,r,x=this;this.init=function(e,n){var o=xe(e),t=o.uiConfig,i=o.componentId;x.uiConfig=t,x.KNB=n,fn().sendPv(),ze({src:"https://s0.meituan.net/mxx/y/default.js",async:!1}),"testOutside"===ve()?ze({src:"https://s0.meituan.net/mxx/yoda-offline/yodaseed.js",async:!0}):ze({src:"https://s0.meituan.net/mxx/yoda/yoda.seed.js",async:!0});var r,a,s,c=document.getElementById(i);c?(c.style.visibility="hidden",c.innerHTML=(r=t,a=Pe.countrycode,s=Pe.phone_num,"\n    <div id="+g.YODA_SEC_VERIFY+" class='mtfe-secyoda-mtfe-wrapper'></div>\n    <div id="+g.YODA_SMS_VERIFY+" class='mtfe-smscodeyoda-mtfe-wrapper'></div>\n    <div class=\"mtfe-tip-mtfe-wrapper\" id="+g.TIP_ID+'></div>\n    <div class="mtfe-model-mtfe-wrapper" id='+g.MODEL_ID+'></div>\n    <div class="mtfe-mask-mtfe-wrapper" id='+g.MASK_ID+'></div>\n    <div class="mtfe-mask-second-mobile-wrapper" id='+g.SECOND_MOBILE_MODEL_ID+'>\n      <div class="mtfe-mask-second-mobile">\n        <div class="mtfe-mask-second-mobile-tip">检测到当前登录环境异常，为保障账号安全，请确认这是不是您本人的账号</div>\n        <div class="mtfe-mask-second-mobile-avatar"><img id='+g.SECOND_MOBILE_AVATAR_ID+' /></div>\n        <div class="mtfe-mask-second-mobile-nickName" id='+g.SECOND_MOBILE_NICKNAME_ID+'></div>\n        <div class="mtfe-mask-second-mobile-confirm" id='+g.SECOND_MOBILE_BUTTON_YES_ID+'>是我的账号</div><div class="mtfe-mask-second-mobile-deny" id='+g.SECOND_MOBILE_BUTTON_NO_ID+'>不是我的账号</div>\n        <div class="mtfe-mask-second-mobile-tip-2">不是我的账号？可能是前任手机号主人注册的。点击“不是我的账号”，将为您注册新的账号</div>\n      </div>\n    </div>\n    <div class="iLoginComp-wrapper '+r.extraClass+'" id='+g.COMP_INNER+'>\n      <div class="iLoginComp-phone-num-wrapper" id="iLoginCompPhoneWrapper">\n        '+(a.show?"\n          <a "+(a.canchange?"href=https://passport.meituan.com/useraccount/countrycode?backurl="+encodeURIComponent(window.location.href):"href='javascript:void(0);'")+'\n          class="country-area">\n            <span id='+g.COUNTRYNAME+' class="iLoginComp-countryname" style='+(a.showname?"":"display:none")+" ></span>\n            <span id="+g.COUNTRYCODE+' class="iLoginComp-countrycode"></span>\n            <i class="right-arrow"></i>\n          </a>\n        ':"")+"\n        <input class='iLoginComp-phone-num-input'\n          id="+g.PHONE_NUM_INPUT_ID+"\n          type='tel'\n          "+(s?"value="+s:"")+"\n          placeholder="+r.phoneNumPlaceholder+">\n        "+(r.showClearInput?"<div class='iLoginComp-clear-input-wrapper' style='display:none' id="+g.PHONE_NUM_CLEAR_ID+">\n          <span class='iLoginComp-clear-input'></span>\n        </div>":"")+"\n        "+(1===r.sendCodePos?'<div class="iLoginComp-send-verify-code-text" id='+g.CODE_ID+"><span id="+g.CODE_TEXT+">"+r.sendCodeText+'</span><div class="fadingCircle" id='+g.LOADING_ID+'>\n        <div class="sms-circle"></div>\n        <div class="sms-circle2"></div>\n        <div class="sms-circle3"></div>\n        <div class="sms-circle4"></div>\n        <div class="sms-circle5"></div>\n        <div class="sms-circle6"></div>\n        <div class="sms-circle7"></div>\n        <div class="sms-circle8"></div>\n        <div class="sms-circle9"></div>\n        <div class="sms-circle10"></div>\n        <div class="sms-circle11"></div>\n        <div class="sms-circle12"></div>\n      </div></div>':"<span></span>")+"\n      </div>\n      "+(2===r.tipStyle?"\n        <div class='mtfe-domtip-mtfe-wrapper' id="+g.FIRST_TIP_ID+"></div>\n      ":"")+"\n      <div class='iLoginComp-verify-code-wrapper' id=\"iLoginCompCodeWrapper\">\n        <input class='iLoginComp-code-input'\n          id="+g.CODE_INPUT_ID+"\n          type='number'\n          maxlength=6\n          placeholder="+r.codePlaceholder+">\n        "+(r.showClearInput?"<div class='iLoginComp-clear-input-wrapper' style='display:none' id="+g.CODE_CLEAR_ID+">\n          <span class='iLoginComp-clear-input'></span>\n          </div>":"")+"\n        "+(2===r.sendCodePos?'<div class="iLoginComp-send-verify-code-text" id='+g.CODE_ID+"><span id="+g.CODE_TEXT+">"+r.sendCodeText+'</span><div class="fadingCircle" id='+g.LOADING_ID+'>\n        <div class="sms-circle"></div>\n        <div class="sms-circle2"></div>\n        <div class="sms-circle3"></div>\n        <div class="sms-circle4"></div>\n        <div class="sms-circle5"></div>\n        <div class="sms-circle6"></div>\n        <div class="sms-circle7"></div>\n        <div class="sms-circle8"></div>\n        <div class="sms-circle9"></div>\n        <div class="sms-circle10"></div>\n        <div class="sms-circle11"></div>\n        <div class="sms-circle12"></div>\n      </div></div>':"<span></span>")+"\n      </div>\n      "+(2===r.tipStyle?"\n        <div class='mtfe-domtip-mtfe-wrapper' id="+g.SECOND_TIP_ID+"></div>\n      ":"")+"\n      <div class='iLogincomp-opbtn-wrapper'>\n        <button class='iLoginComp-cancel-btn-wrapper' id="+g.CANCEL_LOGIN+" style="+(r.showCancel?"":"display:none;")+">\n          "+r.cancelBtnText+"\n        </button>\n        "+(1===r.loginMode?"\n        <button class='iLoginComp-login-btn-wrapper' id="+g.LOGIN_ID+">\n          "+r.loginBtnText+"\n        </button>\n        ":"")+"\n      </div>\n    </div>\n  "),x.elementNodes=function(e){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=document.getElementById(e[o]));return n}(x.idMap),x.renderCountry(),x.bindEvents(),x.handlePhoneInput(Pe.phone_num),c.style.visibility="visible",pn()&&pn()._emit(sn.COMP_INITED)):console.warn("请在页面新建一个id为"+i+"的div容器!")},this.bindEvents=function(){var e="click";d.addHandler(x.elementNodes.sendCodeBtn,e,x.onSendCodeClick),1===x.uiConfig.loginMode&&d.addHandler(x.elementNodes.loginBtn,e,x.onLoginClick),d.addHandler(x.elementNodes.cancelBtn,e,x.onCancelClick),x.uiConfig.phonenumberFormat?d.addHandler(x.elementNodes.phoneNumInput,"keyup",x.onPhoneNumInput):d.addHandler(x.elementNodes.phoneNumInput,"input",x.onPhoneNumInput),d.addHandler(x.elementNodes.phoneNumInput,"focus",x.onPhoneNumInputFocus),d.addHandler(x.elementNodes.phoneNumInput,"blur",x.onPhoneNumInputBlur),d.addHandler(x.elementNodes.codeInput,"input",x.onCodeInput),d.addHandler(x.elementNodes.codeInput,"focus",x.onCodeInputFocus),d.addHandler(x.elementNodes.codeInput,"blur",x.onCodeInputBlur),d.addHandler(x.elementNodes.mask,e,x.onMaskClick),d.addHandler(x.elementNodes.phoneInputClear,e,function(){return x.inputClear("phone")}),d.addHandler(x.elementNodes.codeInputClear,e,function(){return x.inputClear("code")}),pn()&&pn().on(sn.BEFORE_LOGIN_COMPLETE,function(e){x.elementNodes.secondMobileModel.style.display="none",x.KNB&&x.KNB.env.isTitans?x.KNB.ready(function(){x.KNB.setStorage({key:"Channel.Account.SetUserInfo",value:JSON.stringify(e.user),success:function(){x.KNB.publish({type:"native",level:1,action:"KNB.Channel.Account.SetUserInfo",data:{},success:function(){console.log("KNB userinfo_login publish"),pn()&&pn()._emit(sn.LOGIN_COMPLETE,e)},fail:function(){}})}})}):pn()&&pn()._emit(sn.LOGIN_COMPLETE,e)})},this.removeEvents=function(){var e="click";d.removeHandler(x.elementNodes.sendCodeBtn,e,x.onSendCodeClick),1===x.uiConfig.loginMode&&d.removeHandler(x.elementNodes.loginBtn,e,x.onLoginClick),d.removeHandler(x.elementNodes.cancelBtn,e,x.onCancelClick),x.uiConfig.phonenumberFormat?d.removeHandler(x.elementNodes.phoneNumInput,"keyup",x.onPhoneNumInput):d.removeHandler(x.elementNodes.phoneNumInput,"input",x.onPhoneNumInput),d.removeHandler(x.elementNodes.phoneNumInput,"focus",x.onPhoneNumInputFocus),d.removeHandler(x.elementNodes.phoneNumInput,"blur",x.onPhoneNumInputBlur),d.removeHandler(x.elementNodes.codeInput,"input",x.onCodeInput),d.removeHandler(x.elementNodes.codeInput,"focus",x.onCodeInputFocus),d.removeHandler(x.elementNodes.codeInput,"blur",x.onCodeInputBlur),d.removeHandler(x.elementNodes.mask,e,x.onMaskClick),x.elementNodes.phoneInputClear&&d.removeHandler(x.elementNodes.phoneInputClear,e,x.inputClear),x.elementNodes.codeInputClear&&d.removeHandler(x.elementNodes.codeInputClear,e,x.inputClear)},this.clear=function(){x.removeEvents(),mn.session=null},this.showSendCodeBtnLoading=function(e){var n=e.show,o=e.text,t=document.getElementById(x.idMap.sendCodeBtnText),i=document.getElementById(x.idMap.loading);x.uiConfig.showSendCodeLoading&&(n?(t&&(t.textContent=o||x.uiConfig.sendCodeLoadingText),i&&(i.style.display="inline-block"),l(x.elementNodes.sendCodeBtn,"iLogincomp-active")):(t&&(t.textContent=x.uiConfig.sendCodeText),i&&(i.style.display="none"),s(x.elementNodes.sendCodeBtn,"iLogincomp-active")||x.countdowning||c(x.elementNodes.sendCodeBtn,"iLogincomp-active")))},this.showTip=function(e){return x.showSendCodeBtnLoading({show:!1}),1===x.uiConfig.tipStyle?x.showToast(e):x.showDomTip(e)},this.showToast=function(e){var n,o,t=e.msg,i=e.duration;x.showSendCodeBtnLoading({show:!1}),(n={msg:t,ele:x.elementNodes.tip,duration:i||2e3}).msg&&(n.ele.innerHTML=n.msg,o=setTimeout(function(){clearTimeout(o),o=null,n.ele.style.display="none"},n.duration||2e3),n.ele.style.display="block")},this.showDomTip=function(e){var n=e.msg,o=void 0===n?"":n,t=e.ele,i=void 0===t?x.elementNodes.secDomTip:t;2===x.uiConfig.errorPos&&((i=x.elementNodes.firstDomTip).style.visibility="visible"),3===x.uiConfig.errorPos&&((i=x.elementNodes.secDomTip).style.visibility="visible"),i.innerHTML=o,i.style.visibility="visible"},this.resetDomTip=function(){if(x.elementNodes.firstDomTip)switch(x.elementNodes.firstDomTip.innerHTML="",x.elementNodes.secDomTip.innerHTML="",x.uiConfig.errorPos){case 1:x.elementNodes.firstDomTip.style.visibility="hidden",x.elementNodes.secDomTip.style.visibility="hidden";break;case 2:x.elementNodes.firstDomTip.style.visibility="hidden";break;case 3:x.elementNodes.secDomTip.style.visibility="hidden"}},this.getLoginWay=function(){return x.urlQueryObj.ticket&&"fail"===x.urlQueryObj.thirdLogin?"H5":"V3"},this.onMaskClick=function(){"block"===x.elementNodes.yodaCode.style.display&&(nn(x.elementNodes.mask),x.elementNodes.yodaCode.innerHTML="",x.canSendCode=!0,x.showSendCodeBtnLoading({show:!1}),pn()&&pn()._emit(sn.LOGIN_LOADING_END))},this.onSendCodeClick=function(e){var n;x.elementNodes.phoneNumInput.value&&(x.countdowning||x.canSendCode&&(x.resetDomTip(),n=x.elementNodes.phoneNumInput.value.replace(/\s/g,""),Ge(n,x.countryCode)?(x.showSendCodeBtnLoading({show:!0}),x.canSendCode=!1,pn()&&pn()._emit(sn.SEND_SMSCODE_CLICK),x.loginApplyHandle(n)):x.showTip({msg:"请输入正确的手机号",ele:x.elementNodes.firstDomTip})))},this.loginApplyHandle=function(i){var e,n,o,t,r,a,s,c,l,d,u,p,m,f,g,h,y,b,C,v,k,_,w,I,N,L;e=i,I=Pe.loginSource,N=Pe.campaignPlatform,L=Pe.allCampaignId,("V3"!==x.getLoginWay()?(_={mobile:e,loginSource:I,campaignPlatform:N,allCampaignId:L,st:x.urlQueryObj.ticket},w=""+Me(Ee.h5LoginApplyUrl),_.sdkVersion=Qe,_.h5Fingerprint=qe(w),O(w,Fe(_),null,!0).then(function(e){return console.log("h5LoginApply res ==>",e),e})):(n={risk_platform:Pe.risk_platform,risk_partner:Pe.risk_partner,risk_app:Pe.risk_app,join_key:Pe.join_key,risk_smsTemplateId:Pe.risk_smsTemplateId,risk_smsPrefixId:Pe.risk_smsPrefixId,uuid:Pe.uuid,h5Fingerprint:qe(window.location.href),mobile:e,loginSource:I,campaignPlatform:N,allCampaignId:L,countryCode:x.countryCode},o=n.uuid,t=n.risk_app,r=n.risk_platform,a=n.risk_partner,s=n.mobile,c=n.verifyLevel,l=void 0===c?2:c,d=n.specialRiskCode,u=n.risk_smsTemplateId,p=void 0===u?0:u,m=n.risk_smsPrefixId,f=void 0===m?0:m,g=n.h5Fingerprint,h=n.loginSource,y=n.campaignPlatform,b=n.allCampaignId,C=n.join_key,v=n.countryCode,k=void 0===v?"86":v,Ae(o).then(function(e){var n={uuid:e,risk_app:t,risk_platform:r,risk_partner:a,risk_smsTemplateId:p,join_key:C,risk_smsPrefixId:f,loginSource:h,campaignPlatform:y,allCampaignId:b,sdkType:"h5",sdkVersion:Qe},o={mobile:s,verifyLevel:l,h5Fingerprint:g,countryCode:k};return void 0!==d&&(o.specialRiskCode=d),O(Me(Ee.loginApplyUrl)+"?"+be(n),o).then(function(e){return console.log("mobileLoginApply res ==>",e),e})}))).then(function(e){var o,n,t=e.error;101190===t.code?t.data&&(o=t.data.requestCode,n=o,(window.XDomainRequest?E(Le()+"?requestCode="+n).then(function(e){return e}):O(Le(),{requestCode:n}).then(function(e){return e})).then(function(e){var n;e&&1===e.status?(n={id:e.data.riskLevel,request_code:o,fingerprint:"",mobile:i},x.action=e.data.action,x.extInfoParam=n,x.requestExtInfo(x.action,x.extInfoParam)):(fn().sendLog({category:"jsError",sec_category:"【H5 getPageData Response ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:i,error:e,loginWay:x.getLoginWay(),requestCode:o}}),x.showTip({msg:x.uiConfig.phoneNumErrorText||e.error.message,ele:x.elementNodes.firstDomTip}),x.canSendCode=!0)}).catch(function(e){console.error(e),fn().sendLog({category:"ajaxError",sec_category:"【H5 getPageData ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:i,error:e,loginWay:x.getLoginWay(),requestCode:o}}),x.canSendCode=!0,x.showToast({msg:"网络错误，请稍后重试！"})})):(fn().sendLog({category:"jsError",sec_category:"【H5 loginApplyHandle Response ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:i,loginWay:x.getLoginWay(),error:e}}),x.showTip({msg:x.uiConfig.phoneNumErrorText||t.message,ele:x.elementNodes.firstDomTip}),x.canSendCode=!0)}).catch(function(e){console.error(e),fn().sendLog({category:"ajaxError",sec_category:"【H5 loginApplyHandle ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:i,loginWay:x.getLoginWay(),error:e}}),x.canSendCode=!0,x.showToast({msg:"网络错误，请稍后重试！"})})},this.yodaSuccCb=function(){x.requestExtInfo(x.action,x.extInfoParam),Ye({yodaEle:x.elementNodes.yodaCode,maskEle:x.elementNodes.mask}),x.canSendCode=!0},this.yodaFailCb=function(e){x.showToast({msg:"验证失败，请稍后重试！"}),fn().sendLog({category:"jsError",level:"info",sec_category:"【H5 yodaFail 滑块验证失败】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.elementNodes.phoneNumInput.value.replace(/\s/g,""),error:e}}),x.canSendCode=!0,Ye({yodaEle:x.elementNodes.yodaCode,maskEle:x.elementNodes.mask})},this.secYodaSuccCb=function(e){var n=e.requestCode,o=e.responseCode;x.elementNodes.innerLoginComp.style.display="block",x.elementNodes.secYoda.innerHTML="",x.elementNodes.secYoda.style.display="none";var t,i=ln.userTicket,r=x.deviceInfo,a=r.os,s=void 0===a?"":a,c=r.model,l=void 0===c?"":c;i&&n&&o&&(t={requestCode:n,responseCode:o,userTicket:i,h5Fingerprint:qe(window.location.href),loginSource:Pe.loginSource,campaignPlatform:Pe.campaignPlatform,allCampaignId:Pe.allCampaignId,token_id:Pe.token_id,tokenVersion:Pe.tokenVersion,riskPlatform:Pe.risk_platform,riskPartner:Pe.risk_partner,device_name:"",device_type:l,device_os:s,sdkType:Pe.isMobile?"h5":"pc"},Ae().then(function(n){var e={loginSource:t.loginSource,campaignPlatform:t.campaignPlatform,allCampaignId:t.allCampaignId,token_id:t.token_id,sdkType:t.sdkType,sdkVersion:Qe,uuid:n,risk_platform:t.riskPlatform,risk_partner:t.riskPartner},o={setCookie:!0,responseCode:t.responseCode,userTicket:t.userTicket,requestCode:t.requestCode,h5Fingerprint:t.h5Fingerprint,tokenVersion:t.tokenVersion,device_name:t.device_name,device_type:t.device_type,device_os:t.device_os};return O(Me(Ee.verifyloginUrl)+"?"+be(Fe(e)),o,null,!0).then(function(e){return{uuid:n,res:e}})}).then(function(e){e&&!e.res.error?(pn()&&pn()._emit(sn.LOGIN_LOADING_END),pn()&&pn()._emit(sn.BEFORE_LOGIN_COMPLETE,{uuid:e.uuid,user:e.res.user,mobile:x.extInfoParam.mobile})):(pn()&&pn()._emit(sn.LOGIN_FAILED,e),fn().sendLog({category:"jsError",sec_category:"【H5 verifylogin Response ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.extInfoParam.mobile,error:e,requestCode:n}}),x.showTip({msg:e.res.error.message,ele:x.elementNodes.secDomTip}))}).catch(function(e){console.error(e),pn()&&pn()._emit(sn.LOGIN_LOADING_END),pn()&&pn()._emit(sn.LOGIN_FAILED,e),fn().sendLog({category:"ajaxError",sec_category:"【H5 verifylogin ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.extInfoParam.mobile,error:e.message,requestCode:n}}),x.showToast({msg:"网络错误，请稍后重试！"})})),ln.userTicket=null},this.secYodaFailCb=function(e){console.log("二次验证失败",e),pn()&&pn()._emit(sn.LOGIN_LOADING_END),pn()&&pn()._emit(sn.LOGIN_FAILED,e),fn().sendLog({category:"jsError",level:"info",sec_category:"【H5 secYodaFailCb 二次验证失败】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.elementNodes.phoneNumInput.value.replace(/\s/g,""),error:e}});var n="";switch(e&&e.code){case 121061:n="验证信息刷新次数过多，请24小时之后重试";break;default:n="二次验证失败，请稍后重试！"}x.elementNodes.innerLoginComp.style.display="block",x.elementNodes.secYoda.style.display="none",x.elementNodes.secYoda.innerHTML="",x.secVerifyHasFailed=!0,x.showToast({msg:n})},this.requestExtInfo=function(e,n){We(x.action,n).then(function(e){if(1===e.status)return x.showToast({msg:"验证码已发送, 请稍候"}),void x.showCountdown();var n=e.error;if(!n.request_code)return fn().sendLog({category:"jsError",sec_category:"【H5 getExtInfo Response ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.extInfoParam.mobile,error:e,requestCode:x.extInfoParam.request_code}}),x.showTip({msg:x.uiConfig.phoneNumErrorText||n.message,ele:x.elementNodes.firstDomTip}),void(x.canSendCode=!0);var o={requestCode:n.request_code,succCallbackFun:"yodaSuccCb",failCallbackFun:"yodaFailCb",root:g.YODA_SMS_VERIFY,theme:"meituan",isMobile:Pe.isMobile,style:{wrapper:"wrapper",boxWrapper:"boxWrapper",imgWrapper:"imgWrapper",btnWrapper:"btnWrapper",yodaTip:"yodaTip"},mounted:function(){var e;(e={yodaEle:x.elementNodes.yodaCode,maskEle:x.elementNodes.mask}).yodaEle.style.display="block",en(e.maskEle)}};ve()?YodaSeed(o,"testOutside"===ve()?"test":ve()):YodaSeed(o)}).catch(function(e){console.error(e),fn().sendLog({category:"jsError",sec_category:"【H5 getExtInfo ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.extInfoParam.mobile,error:e.message,requestCode:x.extInfoParam.request_code}}),x.showToast({msg:"网络错误，请稍后重试！"}),x.canSendCode=!0})},this.onLoginClick=function(e){var n;x.canLogin&&(2===x.uiConfig.loginMode&&x.showSendCodeBtnLoading({show:!0,text:"验证中"}),n=x.elementNodes.codeInput.value,x.extInfoParam&&x.extInfoParam.request_code?(pn()&&pn()._emit(sn.LOGIN_CLICK),pn()&&pn()._emit(sn.LOGIN_LOADING_START),x.canLogin=!1,Ke(x.action,a({},x.extInfoParam,{smscode:n})).then(function(e){var n=e.status,o=e.error;if(0===n)return pn()&&pn()._emit(sn.LOGIN_LOADING_END),pn()&&pn()._emit(sn.LOGIN_FAILED,e),x.showTip({msg:x.uiConfig.codeErrorText||o&&o.message,ele:x.elementNodes.secDomTip}),x.canLogin=!0,void fn().sendLog({category:"jsError",sec_category:"【H5 onLoginClick Response ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.extInfoParam.mobile,error:e,requestCode:x.extInfoParam.request_code}});x.loginHandler(e&&e.data&&e.data.response_code)}).catch(function(e){console.error(e),pn()&&pn()._emit(sn.LOGIN_LOADING_END),pn()&&pn()._emit(sn.LOGIN_FAILED,e),x.canLogin=!0,fn().sendLog({category:"jsError",sec_category:"【H5 onLoginClick ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.extInfoParam.mobile,error:e,requestCode:x.extInfoParam.request_code}}),x.showToast({msg:"网络错误，请稍后重试！"})})):x.showTip({msg:x.uiConfig.codeErrorText||"验证信息丢失，请重新发送验证码！",ele:x.elementNodes.secDomTip}))},this.onCancelClick=function(e){pn()&&pn()._emit(sn.CANCEL_CLICK)},this.secondMobileNoClickCheckCallback=function(e){var m,n=Pe.risk_platform,o=Pe.risk_partner,t=Pe.risk_app,i=Pe.uuid,r=Pe.join_key,a=Pe.tokenVersion,s=Pe.token_id,c=Pe.isMobile,l=x.deviceInfo,d=l.os,u=void 0===d?"":d,p=l.model,f=void 0===p?"":p,g={risk_platform:n,risk_partner:o,risk_app:t,join_key:r,token_id:s,uuid:i,tokenVersion:a,userTicket:e,h5Fingerprint:qe(window.location.href),device_name:"",device_type:f,device_os:u,sdkType:c?"h5":"pc"};Ae((m=g).uuid).then(function(n){var e=m.risk_platform,o=m.risk_partner,t=m.risk_app,i=m.join_key,r=m.userTicket,a=m.device_name,s=m.device_type,c=m.device_os,l=m.token_id,d=m.sdkType,u={uuid:n,risk_platform:e,risk_partner:o,risk_app:t,join_key:i,token_id:l,sdkType:d},p={setCookie:!0,userTicket:r,h5Fingerprint:m.h5Fingerprint,tokenVersion:m.tokenVersion,device_name:a,device_type:s,device_os:c};return O(Me(Ee.ticketloginUrl)+"?"+be(Fe(u)),p,null,!0).then(function(e){return{uuid:n,loginInfo:e}})}).then(function(e){var n,o=e.loginInfo;o&&o.error?(n=o.error.message,x.showTip({msg:x.uiConfig.loginErrorText||n,ele:x.elementNodes.secDomTip}),pn()&&pn()._emit(sn.LOGIN_LOADING_END),pn()&&pn()._emit(sn.LOGIN_FAILED,e),x.canLogin=!0,fn().sendLog({category:"jsError",sec_category:"【loginHandler Response ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.extInfoParam.mobile,error:e,loginWay:x.getLoginWay(),requestCode:x.extInfoParam.request_code}})):x.loginSuccess(e)})},this.onSecondMobileYesClick=function(e,n){x.loginHandler(e,n)},this.onSecondMobileNoClick=function(e){Ve({msg:"即将为您注册新的美团账号",ele:x.elementNodes.model,maskEle:x.elementNodes.mask,hasCancel:!0,confirmCallBack:function(){x.secondMobileNoClickCheckCallback(e)}})},this.secondMobilVerify=function(e,n){void 0===n&&(n={});var o=n.avatar,t=n.username,i=n.userTicket;x.elementNodes.secondMobileAvatar.src=o||"//p1.meituan.net/travelcube/72dab47c7b68917cb05849bf242fc9f117580.png",x.elementNodes.secondMobileNickName.innerHTML=t||"美团用户";var r=Pe.isMobile?"tap":"click";d.addHandler(x.elementNodes.secondMobileButtonYes,r,function(){x.onSecondMobileYesClick(e,i)}),d.addHandler(x.elementNodes.secondMobileButtonNo,r,function(){x.onSecondMobileNoClick(i)}),x.elementNodes.secondMobileModel.style.display="block"},this.loginSuccess=function(e){pn()&&pn()._emit(sn.BEFORE_LOGIN_COMPLETE,{uuid:e.uuid,user:"V3"===x.getLoginWay()?e.loginInfo.user:e.loginInfo,mobile:x.extInfoParam.mobile}),pn()&&pn()._emit(sn.LOGIN_LOADING_END),x.canLogin=!0},this.loginHandler=function(a,e){var o,t,n=Pe.loginSource,i=Pe.campaignPlatform,r=Pe.allCampaignId,s=Pe.token_id,c=Pe.isMobile,l=x.deviceInfo,d=l.os,u=void 0===d?"":d,p=l.model,m=void 0===p?"":p,f="V3"===x.getLoginWay()?(o={risk_platform:Pe.risk_platform,risk_partner:Pe.risk_partner,risk_app:Pe.risk_app,join_key:Pe.join_key,uuid:Pe.uuid,loginSource:n,campaignPlatform:i,allCampaignId:r,token_id:s,sdkType:c?"h5":"pc"},t={tokenVersion:Pe.tokenVersion,requestCode:x.extInfoParam.request_code,mobile:x.extInfoParam.mobile,responseCode:a,h5Fingerprint:qe(window.location.href),countryCode:x.countryCode,userTicket:e,device_name:"",device_type:m,device_os:u},Ae(o.uuid).then(function(n){o.uuid=n,o.sdkVersion=Qe;var e=Me(Ee.mobileLoginUrl)+"?"+be(Fe(o));return t.setCookie=!0,O(e,t,null,!0).then(function(e){return{uuid:n,loginInfo:e}})})):function(o){Me(Ee.h5loginUrl);return o.sdkVersion=Qe,Ae().then(function(n){var e=""+Me(Ee.h5loginUrl);return o.sdkVersion=Qe,o.supportVerifyLogin=1,o.h5Fingerprint=qe(e),O(e,Fe(o),null,!0).then(function(e){return console.log("h5Login loginInfo ==>",e),{loginInfo:e,uuid:n}})})}({loginSource:n,campaignPlatform:i,allCampaignId:r,token_id:s,responseCode:a,st:x.urlQueryObj.ticket,requestCode:x.extInfoParam.request_code,device_name:"",device_type:m,device_os:u,sdkType:c?"h5":"pc"});f.then(function(e){var n=e.loginInfo;if(n&&n.error){var o=n.error,t=o.code,i=o.data,r=o.message;switch(t){case 101157:Ve({msg:r,ele:x.elementNodes.model,confirmCallBack:function(){console.log("二次验证模块初始化start");var e=i.param,n=i.userTicket;ln.userTicket=n;var o={requestCode:an(e).requestCode,succCallbackFun:"secYodaSuccCb",failCallbackFun:"secYodaFailCb",root:g.YODA_SEC_VERIFY,theme:"meituan",isMobile:Pe.isMobile,style:{wrapper:"wrapper",yodaTip:"yodaTip",yodasms:"yodasms"},mounted:function(){console.log("二次验证模块初始化end"),x.elementNodes.secYoda.style.display="block"}};ve()?YodaSeed(o,"testOutside"===ve()?"test":ve()):YodaSeed(o);var t=setTimeout(function(){"block"!==x.elementNodes.secYoda.style.display&&(console.log("二次验证模块初始化强制end"),x.secVerifyHasFailed?x.secVerifyHasFailed=!1:x.elementNodes.secYoda.style.display="block"),clearTimeout(t),t=null},3e3)},maskEle:x.elementNodes.mask});break;case 101159:x.secondMobilVerify(a,i);break;default:x.showTip({msg:x.uiConfig.loginErrorText||r,ele:x.elementNodes.secDomTip}),pn()&&pn()._emit(sn.LOGIN_LOADING_END),pn()&&pn()._emit(sn.LOGIN_FAILED,e),x.canLogin=!0,fn().sendLog({category:"jsError",sec_category:"【loginHandler Response ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.extInfoParam.mobile,error:e,loginWay:x.getLoginWay(),requestCode:x.extInfoParam.request_code}})}}else x.loginSuccess(e)}).catch(function(e){pn()&&pn()._emit(sn.LOGIN_LOADING_END),x.canLogin=!0,console.error(e),fn().sendLog({category:"ajaxError",sec_category:"【loginHandler ERROR】",content:{sdkVersion:Qe,countryCode:x.countryCode,mobile:x.extInfoParam.mobile,error:e,loginWay:x.getLoginWay(),requestCode:x.extInfoParam.request_code}}),x.showToast({msg:"网络错误，请稍后重试！"})})},this.onPhoneNumInput=function(e){var n=e.target.value;"86"===x.countryCode&&x.uiConfig.phonenumberFormat&&(e.target.value=n.replace(/\s/g,"").replace(/(\d{3}){1}(\d){1,4}?(?=\d*$)/g,"$1 $2")),e.target.value=e.target.value.substr(0,x.maxPhoneNumLen),x.handlePhoneInput(e.target.value)},this.handlePhoneInput=function(e){e=Ue(e),x.elementNodes.phoneInputClear&&(e.length?x.elementNodes.phoneInputClear.style.display="block":x.elementNodes.phoneInputClear.style.display="none"),e.length>=x.minPhoneNumLen&&Ge(e.replace(/\s/g,""),x.countryCode)&&!x.countdowning?(s(x.elementNodes.sendCodeBtn,"iLogincomp-active")||c(x.elementNodes.sendCodeBtn,"iLogincomp-active"),x.canSendCode=!0):(l(x.elementNodes.sendCodeBtn,"iLogincomp-active"),x.canSendCode=!1),x.toggleLoginBtn()},this.onCodeInput=function(e){var n=e.target.value;x.elementNodes.codeInputClear&&(n.length?x.elementNodes.codeInputClear.style.display="block":x.elementNodes.codeInputClear.style.display="none"),6<=n.length&&(e.target.value=Ue(n.substr(0,6))),x.toggleLoginBtn(),2===x.uiConfig.loginMode&&6===e.target.value.length&&(x.loginLock||(x.loginLock=!0,x.onLoginClick(),setTimeout(function(){x.loginLock=!1},200)))},this.toggleLoginBtn=function(){x.resetDomTip(),Ge(x.elementNodes.phoneNumInput.value.replace(/\s/g,""),x.countryCode)&&/^.{6}$/.test(x.elementNodes.codeInput.value)?(x.canLogin=!0,1!==x.uiConfig.loginMode||s(x.elementNodes.loginBtn,"iLogincomp-active")||c(x.elementNodes.loginBtn,"iLogincomp-active")):(x.canLogin=!1,1===x.uiConfig.loginMode&&l(x.elementNodes.loginBtn,"iLogincomp-active"))},this.showCountdown=function(){x.countdowning=!0,l(x.elementNodes.sendCodeBtn,"iLogincomp-active");var e=x.elementNodes.sendCodeBtn.innerHTML;x.elementNodes.sendCodeBtn.innerHTML='<span class="iLogincomp-count-down"><span id="iLoginCounDown" ></span><span class=\'sending-code-text\'>'+x.uiConfig.sendingCodeText+"</span></span>",v(60,document.getElementById("iLoginCounDown")).then(function(){x.canSendCode=!0,x.countdowning=!1,c(x.elementNodes.sendCodeBtn,"iLogincomp-active"),x.elementNodes.sendCodeBtn.innerHTML=e,document.getElementById("sendCodeBtnText").textContent=x.uiConfig.sendCodeTextAgain})},this.isThirdEnv=function(){return He()||je()},this.thirdLogin=function(e){x.isThirdEnv()&&"succ"!==x.urlQueryObj.thirdLogin&&"fail"!==x.urlQueryObj.thirdLogin&&x.getThirdLoginParam(e).then(function(e){console.log("param=======>",be(e)),window.location.replace(Me(Ee.h5authUrl)+"?"+be(e))})},this.getThirdLoginParam=function(e){return xe(e),Ae(Pe.uuid).then(function(e){var n={platform:Pe.risk_platform,partner:Pe.risk_partner,specialRiskCode:Pe.specialRiskCode,callbackUrl:Pe.callbackUrl,callbackFailUrl:Pe.callbackFailUrl,poiid:Pe.poiid,officialAccount:Pe.officialAccount,LONGITUDE:Pe.LONGITUDE,LATITUDE:Pe.LATITUDE,fromH5:1,version:2,thirdType:je()?1:He()?2:0,uuid:e};return Fe(n)})},this.urlQueryToObj=function(e){return an(e)},this.idMap={innerLoginComp:g.COMP_INNER,sendCodeBtn:g.CODE_ID,sendCodeBtnText:g.CODE_TEXT,loginBtn:g.LOGIN_ID,phoneNumInput:g.PHONE_NUM_INPUT_ID,codeInput:g.CODE_INPUT_ID,tip:g.TIP_ID,yodaCode:g.YODA_SMS_VERIFY,secYoda:g.YODA_SEC_VERIFY,mask:g.MASK_ID,cancelBtn:g.CANCEL_LOGIN,model:g.MODEL_ID,secondMobileModel:g.SECOND_MOBILE_MODEL_ID,secondMobileAvatar:g.SECOND_MOBILE_AVATAR_ID,secondMobileNickName:g.SECOND_MOBILE_NICKNAME_ID,secondMobileButtonYes:g.SECOND_MOBILE_BUTTON_YES_ID,secondMobileButtonNo:g.SECOND_MOBILE_BUTTON_NO_ID,firstDomTip:g.FIRST_TIP_ID,secDomTip:g.SECOND_TIP_ID,countryCodeSpan:g.COUNTRYCODE,countryNameSpan:g.COUNTRYNAME,phoneInputClear:g.PHONE_NUM_CLEAR_ID,codeInputClear:g.CODE_CLEAR_ID,loading:g.LOADING_ID},this.elementNodes={},this.canSendCode=!1,this.countdowning=!1,this.session=(e=new dn,mn.session=e,mn.session),this.urlQueryObj=this.urlQueryToObj(window.location.search.substring(1)),this.action="V3"===this.getLoginWay()?"login":"thirdlogin",this.loginLock=!1,this.deviceInfo=(n=navigator.userAgent,o=/mobile|iPhone|iPad|iPod|iOS|Android/i.test(n),t=n.toLowerCase(),r=i="",o?(-1<n.indexOf("Trident")?r="IE浏览器":-1<n.indexOf("Presto")?r="Opera":-1<n.indexOf("AppleWebKit")?r="Chrome":-1<n.indexOf("Gecko")&&-1==n.indexOf("KHTML")?r="Firefox":/\sQQ/i.test(n)?r="QQ浏览器":-1<n.indexOf("MicroMessenger")?r="微信浏览器":/Safari/.test(n)&&!/Chrome/.test(n)&&(r="Safari"),-1<n.indexOf("Android")||-1<n.indexOf("Linux")?i="Android":-1<n.indexOf("iPhone")?i="iOS":-1<n.indexOf("iPad")&&(i="iPad OS")):(0<t.indexOf("qqbrowser")?r="QQ浏览器":0<t.indexOf("se 2.x")?r="搜狗浏览器":/edge\/([\d.]+)/.test(t)?r="Edge浏览器":/firefox\/([\d.]+)/.test(t)?r="Firefox":/chrome\/([\d.]+)/.test(t)?r="Chrome":/opera.([\d.]+)/.test(t)?r="Opera":/version\/([\d.]+).*safari/.test(t)?r="Safari":(/rv:([\d.]+)\) like gecko/.test(t)||/msie ([\d.]+)/.test(t))&&(r="IE浏览器"),/macintosh|mac os x/i.test(t)?i="Mac":(0<=t.indexOf("win32")||0<=t.indexOf("wow32")||0<=t.indexOf("win64")||0<=t.indexOf("wow64"))&&(i="Window")),{os:i,model:r})}var Cn,vn,kn,_n;location.search&&(kn="http://portal-portm.sankuai.com/passport/eruda",null!==(vn=(Cn=location.search.match(/[?&]debugcode=([^&#]+)/))&&Cn[1])&&("test"!==vn&&(kn="http://portal-portm.meituan.com/passport/debugproxy?debugcode="+vn),(_n=new XMLHttpRequest).open("GET",kn,!1),_n.onreadystatechange=function(){var e;4===_n.readyState&&200===_n.status&&((e=document.createElement("script")).type="text/javascript",e.innerHTML=_n.responseText,document.getElementsByTagName("head")[0].appendChild(e),eruda.init(),eruda.add(erudaDom))},_n.send(null)));var wn=new yn,In="undefined"!=typeof window;return wn.load=function(){In&&(window.iLoginComp=wn,window.yodaSuccCb=function(){return window.iLoginComp.yodaSuccCb()},window.yodaFailCb=function(e){return window.iLoginComp.yodaFailCb(e)},window.secYodaSuccCb=function(e){return window.iLoginComp.secYodaSuccCb(e)},window.secYodaFailCb=function(e){return window.iLoginComp.secYodaFailCb(e)},window.Rohr_Opt={geo:!1})},wn.load(),wn});

